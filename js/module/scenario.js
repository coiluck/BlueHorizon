// scenario.js
import { changeBackgroundImage } from './scenarioAction.js';

export const openingScenario = [
  { text: 'どこまでも続く海の中を、微かな駆動音と共に泳いでいく。' },
  { text: '駆動音と私の息が、静かに響いている。' },
  { text: '小型潜水艇「セレスティア号」――' },
  { text: 'その暗い操縦席でほのかに光る計器の数字が、私の顔をほのかに照らし出していた。' },
  { text: '（……水深、180。海流、0.2ノット東向き。ソナー反応、なし）',
    speaker: 'ミナ'
  },
  { text: '数値を一つずつ確認しながら、セレスティア号の姿勢制御スラスターを微調整する。' },
  { text: 'バラストタンクの水量も適正。酸素残量は残り50%。' },
  { text: '「……よし」',
    speaker: 'ミナ'
  },
  { text: '私は小さくつぶやいて、私は操縦桿を握り直した。' },
  { text: 'この狭い船内に響くのは、セレスティア号の落ち着いたエンジン音だけ。' },
  { text: '外の世界から完全に遮断された小さな鉄の箱の中で、私は一人、海の中を漂っている。' },
  { text: 'ふと覗き窓の外を見ると、発光するクラゲの群れが星屑のように流れていった。' },
  { text: '「……きれい」',
    speaker: 'ミナ'
  },
  { text: '思わず漏れた呟きは、静かな船内に小さく響いて消えた。' },
  { text: 'けれどその優雅な光の舞踏の下には、かつて数十万の人々が暮らしていた街が、墓標のように沈んでいる。' },
  { text: 'ヘッドライトの光が、巨大な建造物の残骸をなぞった。' },
  { text: '街灯の代わりに発光する海藻が揺れ、道には魚の群れが泳ぎ、ビルの窓からは海水が静かに出入りしている。' },
  { text: '錆び朽ちた店の看板はまだ次の客を待っているようだった。' },
  { text: '――もう誰も、訪れる人間はいないのに。' },
  { text: 'かつて人々が笑い、語らい、行き交ったであろう街は、今ではすっかり魚たちのものになった。' },
  { text: 'ここは、かつて「地上」だった場所。' },
  { text: '「蒼い沈黙」――' },
  { text: '人々はそう呼んだ。' },
  { text: '原因不明の大海面上昇。' },
  { text: 'ある日突然、理由も前触れもなく海面が上昇を始めた。' },
  { text: '最初は数メートル、それから数十メートル、やがて数百メートル' },
  { text: '――止まることを知らない海は、多くの文明を飲み込んでいった。' },
  { text: '科学者たちは必死に原因を探ったが、答えは見つからなかった。' },
  { text: 'ただ静かに、世界は蒼に塗り替えられていった。' },
  { text: 'そして今、生き残った人々は、海面に浮かぶわずかな陸地で、細々と命をつないでいる。' },
  { text: '私の住む「汐凪の街」も、そんな場所の一つだった。' },
  { text: 'コン、と何かが船体にぶつかる小さな音がして、私は思考の海から引き戻される。' },
  { text: '計器に異常はない。おそらく、どこかの瓦礫の欠片だろう。' },
  { text: '海の中でデブリが舞っていることも珍しくない。' },
  { text: '「……今日の成果は、これくらいかな」',
    speaker: 'ミナ'
  },
  { text: '私はバスケットの中の回収品の様子をモニターで確認する。' },
  { text: '中にあるのはありふれた金属片や電子部品。' },
  { text: '「蒼い沈黙」前の旧時代なら、それほど珍しくもなかったものだろう。' },
  { text: 'それでも「汐凪の街」では作れない貴重な遺物だった。' },
  { text: '私はサルベージャー。' },
  { text: '研究者だったお父さんが遺してくれた、この小型潜水艇「セレスティア号」で、水没した遺跡から使えるものを引き揚げるのが仕事だ。' },
  { text: '（今日はある程度大きい遺物を回収できた。……でも、もう少しだけ潜れそう）',
    speaker: 'ミナ'
  },
  { text: 'セレスティア号のバッテリー残量は、まだ十分残っている。' },
  { text: '酸素残量も低くはないし、安全限界まではもう少し余裕がありそうだった。' },
  {
    text: 'このまま浮上して街に戻るか、それとももう少しだけ探索を続けるか……',
    choiceId: 'isContinueSalvage'
  },
  { text: 'あなたは選択を終えた。' },
  { text: 'これは共通ルートの続きです。' },
  { text: 'ゲームクリア！' }
];

export const openingChoices = {
  isContinueSalvage: [
    {
      buttonText: 'サルベージを切り上げて、街へ戻る',
      branch: [
        { text: '（無理は禁物だよね）',
          speaker: 'ミナ'
        },
        { text: '私はバラストタンクの排水を開始し、セレスティア号を浮上モードに切り替えた。' },
        { text: '深度計の数値がゆっくりと減っていく。' },
        { text: '150メートル、120メートル、90メートル……。' },
        { text: '深く暗い青から、光の差し込む明るい青へ。' },
        { text: 'ゆっくりと浮上していくこの時間は、何度経験しても少しだけ心が安らぐ。' },
        { text: 'ごぽごぽ、と気泡の弾ける音が大きく響き、ついにセレスティア号は海面にその姿を現した。',
          action: () => {
            changeBackgroundImage('opening', 'horizon1.webp');
          }
        },
        { text: '視界いっぱいに広がるのは、どこまでも続く水平線と太陽の光を反射してきらめく穏やかな海。' },
        { text: 'そして私の故郷、「汐凪の街」。' },
        { text: 'ここはかつて大型船だったものの残骸や、引き揚げられた鋼材を組み合わせて作られた集落だ。' },
        { text: '小さな島に、今では手に入れるのも難しい浄水装置をつけて暮らしている。' },
        { text: '決して裕福ではないけれど、人々が懸命に生きているのどかな港町だ。' },
        { text: '私は慣れた手つきでセレスティア号を誘導し、街のドックへと船を進めた。' },
        { text: 'セレスティア号を固定アームに接続し、エンジンを停止させる。' },
        { text: '途端に静寂が訪れる。ふぅ、と長い息が漏れた。' },
        { text: 'これで今日の仕事は終わりだ。' },
        { text: 'ハッチのロックを解除すると、ぷしゅー、という小気味良い音と共に、外の空気が流れ込んできた。' },
        { text: '湿った潮の匂いと、機械油の匂いが混じった、懐かしい街の空気。' },
        { text: '私はゆっくりと梯子を降り、硬い地面を踏みしめた。' },
        { text: 'さて、これからどうしようか。',
          choiceId: 'whereToGo'
        },
      ]
    },
    {
      buttonText: 'もう少しだけ、探索を続ける',
      branch: [
        { text: '（せっかくここまで潜ったんだ。もう少しだけ、探索しよう）',
          speaker: 'ミナ'
        },
        { text: '私は操舵席の横に並ぶバラスト制御レバーへ手を伸ばす。' },
        { text: '「主バラスト、ベント開放。注水開始……。」' },
        { text: '船体の外殻に備えられたタンクへと重い海水が流れ込む低いうなりが響く。' },
        { text: '船体の浮力がゆっくり失われ、計器の針が沈降を示す。' },
        { text: '「トリムタンク、艦首下げ二度。」' },
        { text: '艦首が少しずつ沈み、姿勢が安定したセレスティア号は暗い海へと進んでいく。' },
        { text: 'ヘッドライトが照らす光の筋だけが、海の暗闇を切り裂いて進む。' },
        { text: 'ギシッ……と、セレスティア号の船体が水圧に軋む音が響く。' },
        { text: 'お父さんがくれたこの潜水艇は、他のどんなサルベージャーの船よりも深く潜れる。' },
        { text: 'それでも、この音を聞くといつも、心臓が小さく跳ねるのを止められない。' },
        { text: '息を深く吸い、前方を見る' },
        { text: 'かつては地上の光を浴びていたはずのビル群の影が、今は巨大な海山のようにも見える。' },
        { text: '（あそこなら、何か残っているかも……）' },
        { text: '視線の先に、外壁が大きく崩落したビルが見えた。' },
        { text: 'オフィスだったのだろうか、フロアの断面が暗い口を開けている。' },
        { text: '私は慎重に操縦桿を操作し、舞い上がる泥に気をつけながら、瓦礫の隙間を縫うようにして潜水艇を寄せた。' },
        { text: 'ヘッドライトの光が、ビルの中を照らし出す。' },
        { text: 'そこはまるで、時が止まったまま沈んだみたいだった。' },
        { text: '（お父さんがいたら、全然違うって言うのかな）',
          speaker: 'ミナ'
        },
        { text: '私は「蒼い沈黙」前の世界を知らない。' },
        { text: 'お父さんが見ていたのは、こんな景色だったのだろうか。' },
        { text: 'いいや、違う。' },
        { text: 'お父さんが知っているのは、ここに光が満ち、人々が働き、笑い声が響いていた頃の姿だ。' },
        { text: '私が見ているのは、その全てが失われた後の、静かな骸。' },
        { text: 'ヘッドライトの光が、壁に掛けられたままの額縁を照らした。' },
        { text: '中の写真はとうに溶けてしまい、何が飾られていたのかを知る術はない。' },
        { text: '家族の写真だったのかもしれないし、あるいは、輝かしい功績を称える賞状だったのかもしれない。' },
        { text: 'そのすぐそばを、銀色の鱗を持つ小さな魚の群れが、まるで忙しそうに行き交うオフィスワーカーのように通り過ぎていった。' },
        { text: '皮肉な光景に私は小さく息を吐き、周りをもう一度見渡した。' },
        { text: '泥をかぶったデスクや横倒しになったキャビネットが散乱している。' },
        { text: '誰かのものだったマグカップは、奇跡的に形を保ったまま転がっていた。' },
        { text: 'さて、どこを調べようか',
          choiceId: 'whereToSearch'
        },
      ]
    }
  ],
  whereToSearch: [
    {
      buttonText: 'デスクの上を調べる',
      branch: [
        { text: '（まずは手前のデスクから……何か手がかりになるようなものは残ってないかな）',
          speaker: 'ミナ' 
        },
        { text: '私はセレスティア号のロボットアームを慎重に伸ばす。コンソールの光が、マニピュレーターの繊細な動きを照らし出した。' },
        { text: 'アームの指先が、降り積もった数世紀分の海の塵をそっと払いのける。' },
        { text: '舞い上がった泥の中に現れたのは、プラスチック製のカードホルダーや、海水に蝕まれ原形を留めない電子機器の残骸。どれも静かに朽ち果てていた。' },
        { text: '（やっぱり、こんなものかな……）',
          speaker: 'ミナ'
        },
        { text: '諦めきれずにアームで底のほうを探ると、指先に硬質な感触が伝わった。' },
        { text: '泥の中から姿を現したのは、防水ケースに守られた、旧時代のタブレット端末だった。' },
        { text: '（これは……！ データが残っていれば、大きな発見になるかも）',
          speaker: 'ミナ'
        },
        { text: '心臓が小さく跳ねるのを感じながら、まるで宝物を扱うように、丁寧に回収バスケットへと移した。' },
        { text: 'その後も他のデスクをいくつか調べてみたが、これ以上の成果は期待できそうになかった。' },
        { text: 'ザザ……ッ、と操縦席のスピーカーから不意にノイズが走り、静寂が破られた。聞き慣れた声が響く。' },
        { text: '「こちら汐凪の街、管制室。ミナ、応答できるか？」',
          speaker: 'ギル'
        },
        { text: '「こちらミナ。……ギル爺さん、どうしたの？ 定時連絡にはまだ早い時間だけど」',
          speaker: 'ミナ'
        },
        { text: '「うむ。少し海流に変化の兆しが見られてな。大事を取って、今日のサルベージは切り上げた方がよさそうだ。そちらの状況は？」',
          speaker: 'ギル'
        },
        { text: '私はバスケットの中のタブレットに目をやり、操縦桿を握り直した。今日の成果は十分だ。' },
        { text: '「了解。ちょうど探索を終えたところ。これから浮上して、街へ帰還します」',
          speaker: 'ミナ'
        },
        { text: '「そうか。気をつけて戻ってこい。ドックで待っておる」',
          speaker: 'ギル'
        },
        { text: '通信が切れると、船内は再び深海の静寂に包まれた。' },
        { text: '私はセレスティア号の向きを変え、ゆっくりと崩れたビルの開口部から離脱する。' },
        { text: '今日の仕事は終わり。あとは無事に、私の帰りを待つ人がいるあの街へ戻るだけだ。' }
      ]
    },
    {
      buttonText: '下に続く階段を調べる',
      branch: [
        { text: '（この階段……さらに下のフロアに続いているみたい）',
          speaker: 'ミナ'
        },
        { text: '操縦桿を握る手に、無意識に力が入る。' },
        { text: 'セレスティア号のヘッドライトを階段の下へと向けると、光の束はどこまでも続く闇に吸い込まれ、その底を見せてはくれなかった。' },
        { text: 'これだけ深い場所にある未踏のエリアなら、まだ誰も手をつけていない貴重な遺物が眠っているかもしれない。' },
        { text: '私はスラスターを微調整し、船体が壁に接触しないよう細心の注意を払いながら、階段の入り口へとセレスティア号を寄せた。' },
        { text: 'ギシッ……と、先ほどよりも強い水圧が船体を締め付け、鈍い悲鳴を上げさせる。' },
        { text: 'その時だった。' },
        { text: '『ザ……こちら……凪の……管制室……ミナ、応答……ザザッ……』',
          speaker: 'ギル'
        },
        { text: 'スピーカーがノイズを吐き出し、途切れ途切れになったギル爺さんの声が響いた。' },
        { text: '「ギル爺さん？　どうしたの、電波が悪いみたい。聞こえる？」',
          speaker: 'ミナ'
        },
        { text: '『……海流……ザザッ……大事を……』',
          speaker: 'ギル'
        },
        { text: 'ブツッ、という音を最後に、通信は完全に沈黙した。この深度と、分厚い建造物の残骸が電波を阻害しているのだろう。' },
        { text: '（海流の変化って言ってたような……）',
          speaker: 'ミナ'
        },
        { text: '計器パネルに視線を走らせる。だが、計器の数字は静かだ。周囲の海流に異常は見られない。' },
        { text: 'けれど、ギル爺さんの切羽詰まった声が耳の奥で反響する。警告を無視して進むのか？' },
        { text: 'サルベージャーとしての本能と、生き残るための理性がせめぎ合う。' },
        { text: '……でも、目の前には未知の領域が広がっている。あと少しだけなら……。' },
        { text: '私は固唾を飲んで、光の届かない階段の先を睨みつけた。',
          choiceId: 'deeperOrReturn'
        }
      ]
    }
  ],
  deeperOrReturn: [
    {
      buttonText: '引き返す',
      branch: [
        { text: '（ここで無理をするべきじゃない。一度、通信ができる深度まで戻ろう）',
          speaker: 'ミナ'
        },
        { text: '私は後ろ髪を引かれる思いを断ち切り、操縦桿を引いた。未練がましく、もう一度だけ暗闇に目をやる。' },
        { text: '「安全が第一」――お父さんにも、ギル爺さんにも、いつも言われていることだ。' },
        { text: 'セレスティア号は静かに向きを変え、暗い深淵から離れていく。' },
        { text: '私はゆっくりと潜水艇を浮上させ、光のある汐凪の街への帰路についた。' }
      ]
    },
    {
      buttonText: '探索を続ける',
      branch: [
        { text: '（今のところ、計器に異常はない。もう少しだけ……入り口付近だけでも調べてみよう）',
          speaker: 'ミナ'
        },
        { text: '好奇心と、サルベージャーとしての本能が、私の理性に勝った。大丈夫、計器は嘘をつかない。' },
        { text: '自分に言い聞かせるように呟き、私はスラスターを微調整する。' },
        { text: 'セレスティア号は、まるで巨大な獣の喉の奥へと続くような、暗い階段の闇へとゆっくりと進んでいく。' },
        { text: '頼れるのは、目の前を照らすヘッドライトの光だけだった。' }
      ]
    }
  ],
  whereToGo: [
    {
      buttonText: 'ギル爺さんの作業場へ行く',
      branch: [
        { text: 'aa1' }
      ]
    },
    {
      buttonText: '自分の部屋で少し休む',
      branch: [
        { text: 'aa1' }
      ]
    },
    {
      buttonText: '街の広場に行く',
      branch: [
        { text: 'aa1' }
      ]
    }
  ]
};